<!DOCTYPE html>
<html>
  <head>
    <title>Lessons learnt building the Windows Phone OData browser – Phani Raj – Technical Lead at HP Cloud</title>

        <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="One of the reasons for re-building the OData browser for Windows Phone was to experience first hand the issues our developers face when writing an app for the marketplace that uses the client library my team produces. This blog post describes what I learnt as a developer on the OData browser and what feedback the team received after this exercise.   
Disclaimer : I wrote a lot of the code for the browser such as metadata parsing, dynamic service access without client types and other features for the Silverlight version of the OData browser. About 40% of the code for the Windows Phone browser was brought over from the Silverlight version. The rest of the 60% of code is in the UI and the tombstoning management of data in the app. 
The Good : 
1. The client library’s events the app depended upon were still present and worked just as well.     2. The OData library had no issues at all with feeds of any kind ( paged/non-paged/with count ) , it worked without a hitch.    3. The databinding classes worked fine for the Phone environment and completion fired events on the right( UI ) thread.&#160; 4. Tombstoning for DataServiceCollection and DataServiceContext works quite well for the rows in the app.     5. The platform is quite nice for debugging on the physical device. Other than some really convoluted tombstoning issues, VS and the debugger chugged along just fine.
The “Needs Improvement”:
1. The DataServiceCollection.LoadAsync&lt;T&gt; api doesn’t return an IAsyncResult when you call it.The reason this is important is because&#160; the marketplace’s certification requirements state that long running network tasks need a “Cancel” button. And the way to cancel a request made by the OData client library is to call CancelRequest on the DataServiceContext instance being used by the app. Since I was using DataServiceCollection in my app and kicking off requests using the LoadAsync and LoadNextPartialSetAsync apis, I couldn’t cancel the current request without a rewrite. Finally, I had to stop using the LoadAsync API on the collection and moved to using DataServiceContext.BeginExecute&lt;T&gt; which does return an IAsyncResult and I could CancelRequest when the UI shows the “Cancel” button.     2. No Credentials support via UseDefaultCredentials and Credentials properties on the DataServiceContext&#160; type. This prevented me from adding support in the app for authenticated services.     3. The emulator is slow on my laptop, I may have to buy a new laptop if I want to use the emulator for developing apps.And here’s a joke for sticking so far with this blog post.     &#160;&#160;&#160; How slow is it ?        &#160;&#160;&#160; It’s so slow that the January update for the Phone will be released by the time the emulator starts.
I am looking for other perspectives on developing apps for the marketplace with the OData client library.    How do you find developing with the client library on the Phone ?     What are your pet peeves ? and What are the top features you love ?
" />
    <meta property="og:description" content="One of the reasons for re-building the OData browser for Windows Phone was to experience first hand the issues our developers face when writing an app for the marketplace that uses the client library my team produces. This blog post describes what I learnt as a developer on the OData browser and what feedback the team received after this exercise.   
Disclaimer : I wrote a lot of the code for the browser such as metadata parsing, dynamic service access without client types and other features for the Silverlight version of the OData browser. About 40% of the code for the Windows Phone browser was brought over from the Silverlight version. The rest of the 60% of code is in the UI and the tombstoning management of data in the app. 
The Good : 
1. The client library’s events the app depended upon were still present and worked just as well.     2. The OData library had no issues at all with feeds of any kind ( paged/non-paged/with count ) , it worked without a hitch.    3. The databinding classes worked fine for the Phone environment and completion fired events on the right( UI ) thread.&#160; 4. Tombstoning for DataServiceCollection and DataServiceContext works quite well for the rows in the app.     5. The platform is quite nice for debugging on the physical device. Other than some really convoluted tombstoning issues, VS and the debugger chugged along just fine.
The “Needs Improvement”:
1. The DataServiceCollection.LoadAsync&lt;T&gt; api doesn’t return an IAsyncResult when you call it.The reason this is important is because&#160; the marketplace’s certification requirements state that long running network tasks need a “Cancel” button. And the way to cancel a request made by the OData client library is to call CancelRequest on the DataServiceContext instance being used by the app. Since I was using DataServiceCollection in my app and kicking off requests using the LoadAsync and LoadNextPartialSetAsync apis, I couldn’t cancel the current request without a rewrite. Finally, I had to stop using the LoadAsync API on the collection and moved to using DataServiceContext.BeginExecute&lt;T&gt; which does return an IAsyncResult and I could CancelRequest when the UI shows the “Cancel” button.     2. No Credentials support via UseDefaultCredentials and Credentials properties on the DataServiceContext&#160; type. This prevented me from adding support in the app for authenticated services.     3. The emulator is slow on my laptop, I may have to buy a new laptop if I want to use the emulator for developing apps.And here’s a joke for sticking so far with this blog post.     &#160;&#160;&#160; How slow is it ?        &#160;&#160;&#160; It’s so slow that the January update for the Phone will be released by the time the emulator starts.
I am looking for other perspectives on developing apps for the marketplace with the OData client library.    How do you find developing with the client library on the Phone ?     What are your pet peeves ? and What are the top features you love ?
" />
    
    <meta name="author" content="Phani Raj" />

    
    <meta property="og:title" content="Lessons learnt building the Windows Phone OData browser" />
    <meta property="twitter:title" content="Lessons learnt building the Windows Phone OData browser" />
    

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="alternate" type="application/rss+xml" title="Phani Raj - Technical Lead at HP Cloud" href="/feed.xml" />

    <!-- Created with Jekyll Now - http://github.com/barryclark/jekyll-now -->
  </head>

  <body>
    <div class="wrapper-masthead">
      <div class="container">
        <header class="masthead clearfix">
          <a href="/" class="site-avatar"><img src="https://raw.githubusercontent.com/barryclark/jekyll-now/master/images/jekyll-logo.png" /></a>

          <div class="site-info">
            <h1 class="site-name"><a href="/">Phani Raj</a></h1>
            <p class="site-description">Technical Lead at HP Cloud</p>
          </div>

          <nav>
            <a href="/">Blog</a>
            <a href="/about">About</a>
          </nav>
        </header>
      </div>
    </div>

    <div id="main" role="main" class="container">
      <article class="post">
  <h1>Lessons learnt building the Windows Phone OData browser</h1>

  <div class="entry">
    <p>One of the reasons for re-building the OData browser for Windows Phone was to experience first hand the issues our developers face when writing an app for the marketplace that uses the client library my team produces. This blog post describes what I learnt as a developer on the OData browser and what feedback the team received after this exercise.   </p>
<p><strong>Disclaimer </strong>: I wrote a lot of the code for the browser such as metadata parsing, dynamic service access without client types and other features for the <a href="http://Silverlight.net/ODataExplorer">Silverlight version of the OData browser.</a> About 40% of the code for the Windows Phone browser was brought over from the Silverlight version. The rest of the 60% of code is in the UI and the tombstoning management of data in the app. </p>
<h4>The Good : </h4>
<p><strong>1.</strong> The client library’s events the app depended upon were still present and worked just as well.     <br /><strong>2.</strong> The OData library had no issues at all with feeds of any kind ( paged/non-paged/with count ) , it worked without a hitch.    <br /><strong>3. </strong>The databinding classes worked fine for the Phone environment and completion fired events on the right( UI ) thread.&#160; <br /><strong>4. </strong>Tombstoning for DataServiceCollection and DataServiceContext works quite well for the rows in the app.     <br /><strong>5. </strong>The platform is quite nice for debugging on the physical device. Other than some really convoluted tombstoning issues, VS and the debugger chugged along just fine.</p>
<h4>The “Needs Improvement”:</h4>
<p><strong>1.</strong> The <a href="http://msdn.microsoft.com/en-us/library/ee652863(VS.95).aspx">DataServiceCollection.LoadAsync&lt;T&gt;</a> api doesn’t return an IAsyncResult when you call it.The reason this is important is because&#160; the marketplace’s certification requirements state that long running network tasks need a “Cancel” button. And the way to cancel a request made by the OData client library is to call CancelRequest on the DataServiceContext instance being used by the app. Since I was using DataServiceCollection in my app and kicking off requests using the LoadAsync and LoadNextPartialSetAsync apis, I couldn’t cancel the current request without a rewrite. Finally, I had to stop using the LoadAsync API on the collection and moved to using <a href="http://msdn.microsoft.com/en-us/library/cc646724(v=VS.90).aspx">DataServiceContext.BeginExecute&lt;T&gt;</a> which does return an IAsyncResult and I could CancelRequest when the UI shows the “Cancel” button.     <br /><strong>2. </strong>No Credentials support via <a href="http://msdn.microsoft.com/en-us/library/system.data.services.client.dataservicecontext.usedefaultcredentials(VS.95).aspx">UseDefaultCredentials</a> and <a href="http://msdn.microsoft.com/en-us/library/system.data.services.client.dataservicecontext.credentials(v=VS.95).aspx">Credentials</a> properties on the DataServiceContext&#160; type. This prevented me from adding support in the app for authenticated services.     <br /><strong>3. </strong>The emulator is slow on my laptop, I may have to buy a new laptop if I want to use the emulator for developing apps.And here’s a joke for sticking so far with this blog post.     <br /><em><font face="Tahoma">&#160;&#160;&#160; How slow is it ?        <br />&#160;&#160;&#160; It’s so slow that the January update for the Phone will be released by the time the emulator starts.</font></em></p>
<p>I am looking for other perspectives on developing apps for the marketplace with the OData client library.    <br />How do you find developing with the client library on the Phone ?     <br />What are your pet peeves ? and What are the top features you love ?</p>

  </div>

  <div class="date">
    Written on February  7, 2011
  </div>

  
</article>

    </div>

    <div class="wrapper-footer">
      <div class="container">
        <footer class="footer">
          



<a href="https://github.com/barryclark/jekyll-now"><i class="svg-icon github"></i></a>




<a href="https://www.twitter.com/jekyllrb"><i class="svg-icon twitter"></i></a>



        </footer>
      </div>
    </div>

    

  </body>
</html>
